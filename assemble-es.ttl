@prefix ja: <http://jena.hpl.hp.com/2005/11/Assembler#> .
@prefix es: <http://drugis.org/eventSourcing/es#> .
@prefix eg: <http://example.com/> .
@prefix tdb:     <http://jena.hpl.hp.com/2008/tdb#> .
@prefix rdfs:   <http://www.w3.org/2000/01/rdf-schema#> .
@prefix fuseki:  <http://jena.apache.org/fuseki#> .

[] ja:loadClass "com.hp.hpl.jena.tdb.TDB" .
tdb:DatasetTDB  rdfs:subClassOf  ja:RDFDataset .

es:EventSourcedDataset ja:assembler "es.DatasetAssemblerEventSourcing" ;
  rdfs:subClassOf ja:RDFDataset .

[] a fuseki:Server ;
  fuseki:services (
    <#service_current>
    <#service_history>
  ) .
 
<#service_current> a fuseki:Service ;
  fuseki:name "current" ;
  fuseki:serviceQuery "query" ;
  fuseki:serviceUpdate "update" ;
  fuseki:serviceUpload "upload" ;
  fuseki:serviceReadWriteGraphStore "data" ;
  fuseki:dataset eg:dataset .

<#service_history> a fuseki:Service ;
  fuseki:name "history" ;
  fuseki:serviceQuery "query" ;
  fuseki:serviceReadGraphStore "data" ;
  fuseki:dataset eg:source .

eg:source a tdb:DatasetTDB ;
  tdb:location "DB" .

eg:dataset a es:EventSourcedDataset ;
  es:source eg:source ;
  es:log es:log .
